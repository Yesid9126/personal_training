{% extends "personal_training_base.html" %} {% load static %} {% block content%}
<section class="shopping-cart-area ptb-100">
  <div class="container">
    <div class="cart-controller">
      <div class="cart-table table-responsive">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th scope="col">Trash</th>
              <th scope="col">Image</th>
              <th scope="col">Product name</th>
              <th scope="col">Price</th>
              <th scope="col">Quantity</th>
              <th scope="col">Total</th>
            </tr>
          </thead>

          <tbody>
            {% for course in cart.courses %}
            <tr>
              <td class="trash">
                <button class="remove" id="{{ course.slug_name }}">
                  <i class="bx bx-trash"></i>
                </button>
              </td>

              <td class="product-thumbnail">
                <a href="product-details.html">
                  <img src="{{ course.image.url }}" alt="Image" />
                </a>
              </td>

              <td class="product-name">
                <a href="product-details.html">{{ course.name }}</a>
              </td>

              <td class="product-price">
                <span class="unit-amount">${{ course.price }}</span>
              </td>

              <td class="product-quantity">
                <div class="input-counter">
                  <input type="text" value="1" readonly />
                </div>
              </td>

              <td class="product-subtotal">
                <span class="subtotal-amount">${{ course.price }}</span>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="coupon-cart">
        <div class="row">
          <div class="col-lg-8 col-sm-7">
            <div class="form-group mb-0">
              <input
                type="text"
                class="form-control"
                placeholder="Coupon code"
                value="{{ cart.coupon.code }}"
                id="coupon_code"
              />
              <button class="default-btn" onclick="coupon(this)">
                Apply Coupon
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="cart-totals">
      <h3 class="cart-checkout-title">Checkout Summary</h3>

      <ul>
        <li>Subtotal <span>${{ cart.total }}</span></li>
        <li>Shipping <span>$00.00</span></li>
        <li>Total <span>${{ cart.total }}</span></li>
        {% if cart.coupon %}
        <li>Cupon <span>{{ cart.coupon.percent }}%</span></li>
        {% endif %}
        <li>
          <b>Total a pagar</b> <span><b>${{ cart.total_with_coupon }}</b></span>
        </li>
      </ul>

      <a href="{% url 'users:checkout' %}" class="default-btn">
        <span>Pagar</span>
      </a>
    </div>
  </div>
</section>
{% endblock content %} {% block scripts %}
<script>
  function coupon(e) {
    var coupon_code = document.getElementById("coupon_code").value;
    window.location = "{% url 'users:cart' %}" + `?coupon_code=${coupon_code}`;
  }
</script>
{% endblock %}
